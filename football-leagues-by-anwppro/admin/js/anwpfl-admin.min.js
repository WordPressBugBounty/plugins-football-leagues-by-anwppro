/**
 * *********************
 * Modified version
 * by anwppro
 *
 * TODO needs more improvements
 *
 * @version 0.1.0
 * *********************
 *
 * Original Plugin:
 *
 * @package      CMB2\Field_Ajax_Search
 * @author       Tsunoa
 * @copyright    Copyright (c) Tsunoa
 *
 * Plugin Name: CMB2 Field Type: Ajax Search
 * Plugin URI: https://github.com/rubengc/cmb2-field-ajax-search
 * GitHub Plugin URI: https://github.com/rubengc/cmb2-field-ajax-search
 * Description: CMB2 field type to attach posts, users or terms.
 * Version: 1.0.
 * Author: Tsunoa
 * Author URI: https://tsunoa.com/
 * License: GPLv2+
 */
!function(document,$){function init_ajax_search(){$('.anwp-cmb-ajax-search:not([data-ajax-search="true"])').each(function(){var $this=$(this),$list=$this.closest("div").find("ul"),field_id=$this.data("field-id"),object_type=$this.data("object-type"),query_args=$this.data("query-args");$this.attr("data-ajax-search",!0),$this.devbridgeAutocomplete({serviceUrl:ajaxurl,deferRequestBy:200,type:"POST",dataType:"json",triggerSelectOnValidInput:!1,showNoSuggestionNotice:!0,params:{action:"anwp_cmb_ajax_search_get_results",nonce:anwpflGlobals.ajaxNonce,field_id:field_id,object_type:object_type,query_args:query_args},transformResult:function(results){if(!0!==results.success)return toastr.error("Data Error"),{suggestions:[]};if($("#"+field_id+"_results li").length){var selected=[];$list.find('li input[type="hidden"]').each(function(){selected.push(Number($(this).val()))}),results.data=_.reject(results.data,function(i){return _.contains(selected,i.id)})}return{suggestions:results.data}},onSearchStart:function(){$this.next(".spinner").addClass("is-active")},onSearchComplete:function(){$this.next(".spinner").removeClass("is-active")},onSelect:function(suggestion){$this.devbridgeAutocomplete("clearCache");var field_name=$this.attr("id").replace(new RegExp("_input$"),""),multiple=Number($this.attr("data-multiple")),limit=Number($this.attr("data-limit")),sortable=$this.attr("data-sortable");1===multiple?($("#"+field_name+"_results").append("<li>"+(1==sortable?'<span class="hndl"></span>':"")+'<input type="hidden" name="'+field_name+'[]" value="'+suggestion.id+'"><a href="'+suggestion.link+'" target="_blank" class="edit-link">'+suggestion.value+'</a><a class="remover"><span class="dashicons dashicons-no"></span><span class="dashicons dashicons-dismiss"></span></a></li>'),$this.val(""),limit>0&&limit==$("#"+field_name+"_results li").length?$this.prop("disabled","disabled"):$this.focus()):$("input[name="+field_name+"]").val(suggestion.id).change()}}),1===Number($this.attr("data-sortable"))&&$("#"+field_id+"_results").sortable({handle:".hndl",placeholder:"ui-state-highlight",forcePlaceholderSize:!0})})}init_ajax_search(),$(document).on("cmb2_add_row",function(evt,$row){$row.find(".anwp-cmb-ajax-search").attr("data-ajax-search",!1),init_ajax_search()}),$(document).on("widget-updated widget-added",function(){init_ajax_search()}),$("body").on("click",".anwp-cmb-ajax-search-results a.remover",function(){$(this).parent("li").fadeOut(400,function(){var field_id=$(this).parents("ul").attr("id").replace("_results","");$("#"+field_id).removeProp("disabled"),$("#"+field_id).devbridgeAutocomplete("clearCache"),$(this).remove()})})}(document,jQuery),function($){"use strict";$(function(){if($("#anwp_map_wrapper").length){var map,marker,$longitude=$("#anwp_cmb2_map_input_longitude"),$latitude=$("#anwp_cmb2_map_input_latitude"),$btnReset=$("#anwp_cmb2_map_reset_btn"),$inputSearch=$("#anwp_cmb2_map_input_address"),initialZoom=$latitude.val()&&$longitude.val()?15:8,defaultPosition={lat:$latitude.val()?parseFloat($latitude.val()):51.556,lng:$longitude.val()?parseFloat($longitude.val()):-.279575};$inputSearch.keypress(function(e){13===parseInt(e.keyCode,10)&&e.preventDefault()}),map=new google.maps.Map(document.getElementById("anwp_map_wrapper"),{center:defaultPosition,zoom:initialZoom}),marker=new google.maps.Marker({position:defaultPosition,draggable:!0,map:map});var autocomplete=new google.maps.places.Autocomplete($inputSearch[0]);autocomplete.bindTo("bounds",map),google.maps.event.addListener(autocomplete,"place_changed",function(){const place=autocomplete.getPlace();place.geometry&&(place.geometry.viewport?map.fitBounds(place.geometry.viewport):(map.setCenter(place.geometry.location),map.setZoom(17)),marker.setPosition(place.geometry.location),$latitude.val(place.geometry.location.lat()),$longitude.val(place.geometry.location.lng()))}),google.maps.event.addListener(map,"click",function(e){marker.setPosition(e.latLng),$inputSearch.val(""),$latitude.val(e.latLng.lat()),$longitude.val(e.latLng.lng())}),google.maps.event.addListener(marker,"dragend",function(e){$latitude.val(e.latLng.lat()),$longitude.val(e.latLng.lng()),$inputSearch.val("")}),$btnReset.on("click",function(e){e.preventDefault(),$latitude.val(""),$longitude.val("")})}})}(jQuery),function($){"use strict";var repeatableGroup=$(".cmb-repeatable-group");$(".anwp_fl_cmb_select2").each(function(){$(this).select2({allowClear:!0})}),$.fn.extend({select2_sortable:function(){var select=$(this);$(select).select2(),$(select).on("select2:select",function(evt){var element=evt.params.data.element,$element=$(element);$element.detach(),$(this).append($element),$(this).trigger("change")})}}),$(".anwp_fl_cmb_select2_multi").each(function(){$(this).select2_sortable()}),repeatableGroup.on("cmb2_add_group_row_start",function(event,instance){$(document.getElementById($(instance).data("selector"))).find(".cmb-repeatable-grouping").last().find(".anwp_fl_cmb_select2").each(function(){$(this).select2("destroy")})}),repeatableGroup.on("cmb2_add_row",function(event,newRow){$(newRow).find(".anwp_fl_cmb_select2").each(function(){$("option:selected",this).removeAttr("selected"),$(this).select2({allowClear:!0})}),$(newRow).find(".anwp_fl_cmb_select2_multi").each(function(){$("option:selected",this).removeAttr("selected"),$(this).select2_sortable()}),$(newRow).prev().find(".anwp_fl_cmb_select2").each(function(){$(this).select2({allowClear:!0})}),$(newRow).prev().find(".anwp_fl_cmb_select2_multi").each(function(){$(this).select2_sortable()})}),repeatableGroup.on("cmb2_shift_rows_start",function(event,instance){$(instance).closest(".cmb-repeatable-group").find(".anwp_fl_cmb_select2").each(function(){$(this).select2("destroy")})}),repeatableGroup.on("cmb2_shift_rows_complete",function(event,instance){var groupWrap=$(instance).closest(".cmb-repeatable-group");groupWrap.find(".anwp_fl_cmb_select2").each(function(){$(this).select2({allowClear:!0})}),groupWrap.find(".anwp_fl_cmb_select2_multi").each(function(){$(this).select2_sortable()})}),$(".cmb-add-row-button").on("click",function(event){$(document.getElementById($(event.target).data("selector"))).find(".cmb-row").last().find(".anwp_fl_cmb_select2").each(function(){$(this).select2("destroy")})}),$(".cmb-repeat-table").on("cmb2_add_row",function(event,newRow){$(newRow).prev().find(".anwp_fl_cmb_select2").each(function(){$("option:selected",this).removeAttr("selected"),$(this).select2({allowClear:!0})}),$(newRow).prev().find(".anwp_fl_cmb_select2_multi").each(function(){$("option:selected",this).removeAttr("selected"),$(this).select2_sortable()})})}(jQuery),
/*!
 * gumshoejs v5.1.1
 * A simple, framework-agnostic scrollspy script.
 * (c) 2019 Chris Ferdinandi
 * MIT License
 * http://github.com/cferdinandi/gumshoe
 */
function(root,factory){"function"==typeof define&&define.amd?define([],function(){return factory(root)}):"object"==typeof exports?module.exports=factory(root):root.Gumshoe=factory(root)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(window){"use strict";var defaults={navClass:"active",contentClass:"active",nested:!1,nestedClass:"active",offset:0,reflow:!1,events:!0},emitEvent=function(type,elem,detail){if(detail.settings.events){var event=new CustomEvent(type,{bubbles:!0,cancelable:!0,detail:detail});elem.dispatchEvent(event)}},getOffsetTop=function(elem){var location=0;if(elem.offsetParent)for(;elem;)location+=elem.offsetTop,elem=elem.offsetParent;return location>=0?location:0},sortContents=function(contents){contents&&contents.sort(function(item1,item2){return getOffsetTop(item1.content)<getOffsetTop(item2.content)?-1:1})},isInView=function(elem,settings,bottom){var bounds=elem.getBoundingClientRect(),offset=function(settings){return"function"==typeof settings.offset?parseFloat(settings.offset()):parseFloat(settings.offset)}(settings);return bottom?parseInt(bounds.bottom,10)<(window.innerHeight||document.documentElement.clientHeight):parseInt(bounds.top,10)<=offset},isAtBottom=function(){return window.innerHeight+window.pageYOffset>=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},getActive=function(contents,settings){var last=contents[contents.length-1];if(function(item,settings){return!(!isAtBottom()||!isInView(item.content,settings,!0))}(last,settings))return last;for(var i=contents.length-1;i>=0;i--)if(isInView(contents[i].content,settings))return contents[i]},deactivateNested=function(nav,settings){if(settings.nested){var li=nav.parentNode.closest("li");li&&(li.classList.remove(settings.nestedClass),deactivateNested(li,settings))}},deactivate=function(items,settings){if(items){var li=items.nav.closest("li");li&&(li.classList.remove(settings.navClass),items.content.classList.remove(settings.contentClass),deactivateNested(li,settings),emitEvent("gumshoeDeactivate",li,{link:items.nav,content:items.content,settings:settings}))}},activateNested=function(nav,settings){if(settings.nested){var li=nav.parentNode.closest("li");li&&(li.classList.add(settings.nestedClass),activateNested(li,settings))}};return function(selector,options){var navItems,contents,current,timeout,settings,publicAPIs={};publicAPIs.setup=function(){navItems=document.querySelectorAll(selector),contents=[],Array.prototype.forEach.call(navItems,function(item){var content=document.getElementById(decodeURIComponent(item.hash.substr(1)));content&&contents.push({nav:item,content:content})}),sortContents(contents)},publicAPIs.detect=function(){var active=getActive(contents,settings);active?current&&active.content===current.content||(deactivate(current,settings),function(items,settings){if(items){var li=items.nav.closest("li");li&&(li.classList.add(settings.navClass),items.content.classList.add(settings.contentClass),activateNested(li,settings),emitEvent("gumshoeActivate",li,{link:items.nav,content:items.content,settings:settings}))}}(active,settings),current=active):current&&(deactivate(current,settings),current=null)};var scrollHandler=function(event){timeout&&window.cancelAnimationFrame(timeout),timeout=window.requestAnimationFrame(publicAPIs.detect)},resizeHandler=function(event){timeout&&window.cancelAnimationFrame(timeout),timeout=window.requestAnimationFrame(function(){sortContents(contents),publicAPIs.detect()})};publicAPIs.destroy=function(){current&&deactivate(current,settings),window.removeEventListener("scroll",scrollHandler,!1),settings.reflow&&window.removeEventListener("resize",resizeHandler,!1),contents=null,navItems=null,current=null,timeout=null,settings=null};return settings=function(){var merged={};return Array.prototype.forEach.call(arguments,function(obj){for(var key in obj){if(!obj.hasOwnProperty(key))return;merged[key]=obj[key]}}),merged}(defaults,options||{}),publicAPIs.setup(),publicAPIs.detect(),window.addEventListener("scroll",scrollHandler,!1),settings.reflow&&window.addEventListener("resize",resizeHandler,!1),publicAPIs}}),window.AnWPFootballLeagues=window.AnWPFootballLeagues||{},function(window,document,$,plugin){"use strict";let $c={};plugin.init=function(){plugin.cache(),plugin.bindEvents()},plugin.cache=function(){$c.window=$(window),$c.body=$(document.body)},plugin.bindEvents=function(){"loading"!==document.readyState?plugin.onPageReady():document.addEventListener("DOMContentLoaded",plugin.onPageReady),$c.body.on("click","[data-fl-flush-plugin-cache]",function(e){e.preventDefault();var $this=$(this);$this.data("oldText",$this.text()),jQuery.ajax({dataType:"json",method:"GET",beforeSend:function(xhr){xhr.setRequestHeader("X-WP-Nonce",anwp.rest_nonce),$this.text("processing request ...")},url:anwp.rest_root+"anwpfl/helper/flush-plugin-cache"}).always(function(){$this.text($this.data("oldText"))}).fail(function(){toastr.error("ERROR !!!")})})},plugin.onPageReady=function(){plugin.initBtnPublishClick(),plugin.initCollapseMenuClick(),plugin.initMatchListHelper(),plugin.tableInputNavigation(),plugin.initTextSearch(),plugin.initOptionTabs(),plugin.initDependentOptions(),plugin.initCompetitionCloneModaal();var metaboxNav=$("#anwp-fl-metabox-page-nav");"undefined"!=typeof Gumshoe&&metaboxNav.length&&new Gumshoe("#anwp-fl-metabox-page-nav a",{navClass:"anwp-fl-metabox-page-nav--active",contentClass:"anwp-scroll-content--active",nested:!1,nestedClass:"",offset:60,reflow:!0,events:!1}),"undefined"!=typeof SmoothScroll&&metaboxNav.length&&new SmoothScroll(".anwp-fl-smooth-scroll",{speed:300,speedAsDuration:!0,offset:50})},plugin.initDependentOptions=function(){var $wrapper=$(".cmb2-metabox");$wrapper.on("change",".anwp-fl-parent-of-dependent",function(){var $parent=$(this);$wrapper.find('.anwp-fl-dependent-field[data-parent="'+$parent.data("name")+'"]').each(function(){var childWrapper=$(this),childDataValue=childWrapper.data("value").split(",");_.contains(childDataValue,$parent.val())&&"show"===childWrapper.data("action")||!_.contains(childDataValue,$parent.val())&&"hide"===childWrapper.data("action")?childWrapper.closest(".cmb-row").removeClass("d-none"):childWrapper.closest(".cmb-row").addClass("d-none")})}),$wrapper.find(".anwp-fl-parent-of-dependent").trigger("change")},plugin.initOptionTabs=function(){var initialTab,wrapper=$c.body.find(".anwp-metabox-tabs");if(!wrapper.length)return!1;wrapper.on("click",".anwp-metabox-tabs__control-item",function(e){e.preventDefault();var $this=$(this);if($this.hasClass("anwp-active-tab"))return!1;var target=$($this.data("target"));$this.addClass("anwp-active-tab").siblings(".anwp-metabox-tabs__control-item.anwp-active-tab").removeClass("anwp-active-tab"),target.removeClass("d-none invisible").siblings(".anwp-metabox-tabs__content-item:not( .d-none )").addClass("d-none"),$this.data("target")&&$c.body.find("#anwp_football_leagues_options_metabox").length&&(history.pushState?history.pushState({},"",$this.data("target")):window.location.hash=$this.data("target").substr(1),wrapper.find("#anwp_current_page_hash").val($this.data("target")))}),window.location.hash&&wrapper.find('.anwp-metabox-tabs__control-item[data-target="'+window.location.hash+'"]').length&&(initialTab=wrapper.find('.anwp-metabox-tabs__control-item[data-target="'+window.location.hash+'"]')),!initialTab&&wrapper.find("#anwp_current_page_hash").val()&&(initialTab=wrapper.find('.anwp-metabox-tabs__control-item[data-target="'+wrapper.find("#anwp_current_page_hash").val()+'"]')),initialTab&&initialTab.length||(initialTab=wrapper.find(".anwp-metabox-tabs__control-item:first-child")),initialTab.trigger("click")},plugin.initTextSearch=function(){var $input=$c.body.find("#anwp-fl-live-text-search");if(!$input.length)return!1;$input.on("input",function(e){e.preventDefault();var filter=$input.val().toLowerCase();return $c.body.find("#anwp_fl_text_metabox .anwp-fl-search-data").each(function(){var $this=$(this),search1=$this.data("search-origin"),search2=$this.data("search-modified");-1!==search1.indexOf(filter)||-1!==search2.indexOf(filter)?$this.closest(".cmb-type-anwp-fl-text").removeClass("d-none"):$this.closest(".cmb-type-anwp-fl-text").addClass("d-none")}),!1})},plugin.tableInputNavigation=function(){$(".anwp-fl-input-table").find("td input").keyup(function(e){39===e.which?$(this).closest("td").next().find("input").focus():37===e.which?$(this).closest("td").prev().find("input").focus():40===e.which?$(this).closest("tr").next().find("td:eq("+$(this).closest("td").index()+")").find("input").focus():38===e.which&&$(this).closest("tr").prev().find("td:eq("+$(this).closest("td").index()+")").find("input").focus()}),$(".anwp-fl-input-table").find("td input[type=number]").keydown(function(e){38!==e.which&&40!==e.which||e.preventDefault()})},plugin.initBtnPublishClick=function(){var btnClick=$("#anwp-publish-click-proxy"),btnPublish=$("#publish");btnClick.length&&btnClick.on("click",function(e){if(e.preventDefault(),btnClick.prop("disabled"))return!1;btnClick.prop("disabled",!0),btnClick.next(".spinner").addClass("is-active"),btnPublish.length&&btnPublish.trigger("click")});var btnClickNew=$("#anwp-fl-publish-click-proxy");btnClickNew.length&&btnClickNew.on("click",function(e){if(e.preventDefault(),btnClickNew.prop("disabled"))return!1;btnClickNew.prop("disabled",!0),btnClickNew.find(".spinner").addClass("is-active"),btnPublish.length&&btnPublish.trigger("click")})},plugin.initCollapseMenuClick=function(){var btnCollapse=$(".anwp-fl-collapse-menu");btnCollapse.length&&btnCollapse.on("click",function(e){e.preventDefault(),setUserSetting("anwp-fl-collapsed-menu",btnCollapse.closest(".anwp-fl-menu-wrapper").hasClass("anwp-fl-collapsed-menu")?"":"yes"),btnCollapse.closest(".anwp-fl-menu-wrapper").toggleClass("anwp-fl-collapsed-menu")})},plugin.initMatchListHelper=function(){if($c.body.find('input[name="_fl_date_from"]').length&&void 0!==jQuery.datepicker){var inputFrom=$c.body.find('input[name="_fl_date_from"]'),inputTo=$c.body.find('input[name="_fl_date_to"]');$(inputFrom).add(inputTo).datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,beforeShow:function(input,inst){inst.dpDiv.addClass("cmb2-element")}}),inputFrom.on("change",function(){inputTo.datepicker("option","minDate",inputFrom.val())}),inputTo.on("change",function(){inputFrom.datepicker("option","maxDate",inputTo.val())})}},plugin.initCompetitionCloneModaal=function(){var cloneLink=$c.body.find(".anwp-fl-competition-clone-action"),activeData={link:!1,process:!1};$c.body.find("#anwp-fl-competition-clone-modaal").length&&cloneLink.length&&(cloneLink.modaal({content_source:"#anwp-fl-competition-clone-modaal",custom_class:"anwpfl-shortcode-modal",hide_close:!0,animation:"none"}),cloneLink.on("click",function(e){e.preventDefault(),activeData.link=$(this),activeData.link.modaal("open")}),$("#anwp-fl-competition-clone-modaal__cancel").on("click",function(e){e.preventDefault(),activeData.link.modaal("close")}),$("#anwp-fl-competition-clone-modaal__clone").on("click",function(e){if(activeData.process)return!1;activeData.process=!0,e.preventDefault();var $this=$(this);$this.next(".spinner").addClass("is-active"),$.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"fl_clone_competition",nonce:anwpflGlobals.ajaxNonce,competition_id:activeData.link.data("competition-id"),season_id:$c.body.find("#anwp-fl-clone-season-id").val()}}).done(function(response){response.success?location.href=response.data.link:location.reload(),$this.next(".spinner").removeClass("is-active")})}))},$(plugin.init)}(window,document,jQuery,window.AnWPFootballLeagues),
/*! SmoothScroll v16.1.4 | (c) 2020 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/smooth-scroll */
function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).SmoothScroll=factory()}(this,function(){"use strict";var defaults={ignore:"[data-scroll-ignore]",header:null,topOnEmptyHash:!0,speed:500,speedAsDuration:!1,durationMax:null,durationMin:null,clip:!0,offset:0,easing:"easeInOutCubic",customEasing:null,updateURL:!0,popstate:!0,emitEvents:!0},extend=function(){var merged={};return Array.prototype.forEach.call(arguments,function(obj){for(var key in obj){if(!obj.hasOwnProperty(key))return;merged[key]=obj[key]}}),merged},escapeCharacters=function(id){"#"===id.charAt(0)&&(id=id.substr(1));for(var codeUnit,string=String(id),length=string.length,index=-1,result="",firstCodeUnit=string.charCodeAt(0);++index<length;){if(0===(codeUnit=string.charCodeAt(index)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");codeUnit>=1&&codeUnit<=31||127==codeUnit||0===index&&codeUnit>=48&&codeUnit<=57||1===index&&codeUnit>=48&&codeUnit<=57&&45===firstCodeUnit?result+="\\"+codeUnit.toString(16)+" ":result+=codeUnit>=128||45===codeUnit||95===codeUnit||codeUnit>=48&&codeUnit<=57||codeUnit>=65&&codeUnit<=90||codeUnit>=97&&codeUnit<=122?string.charAt(index):"\\"+string.charAt(index)}return"#"+result},getDocumentHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},getHeaderHeight=function(header){return header?(elem=header,parseInt(window.getComputedStyle(elem).height,10)+header.offsetTop):0;var elem},adjustFocus=function(anchor,endLocation,isNum){0===anchor&&document.body.focus(),isNum||(anchor.focus(),document.activeElement!==anchor&&(anchor.setAttribute("tabindex","-1"),anchor.focus(),anchor.style.outline="none"),window.scrollTo(0,endLocation))},emitEvent=function(type,options,anchor,toggle){if(options.emitEvents&&"function"==typeof window.CustomEvent){var event=new CustomEvent(type,{bubbles:!0,detail:{anchor:anchor,toggle:toggle}});document.dispatchEvent(event)}};return function(selector,options){var settings,toggle,fixedHeader,animationInterval,smoothScroll={};smoothScroll.cancelScroll=function(noEvent){cancelAnimationFrame(animationInterval),animationInterval=null,noEvent||emitEvent("scrollCancel",settings)},smoothScroll.animateScroll=function(anchor,toggle,options){smoothScroll.cancelScroll();var _settings=extend(settings||defaults,options||{}),isNum="[object Number]"===Object.prototype.toString.call(anchor),anchorElem=isNum||!anchor.tagName?null:anchor;if(isNum||anchorElem){var startLocation=window.pageYOffset;_settings.header&&!fixedHeader&&(fixedHeader=document.querySelector(_settings.header));var start,percentage,position,headerHeight=getHeaderHeight(fixedHeader),endLocation=isNum?anchor:function(anchor,headerHeight,offset,clip){var location=0;if(anchor.offsetParent)do{location+=anchor.offsetTop,anchor=anchor.offsetParent}while(anchor);return location=Math.max(location-headerHeight-offset,0),clip&&(location=Math.min(location,getDocumentHeight()-window.innerHeight)),location}(anchorElem,headerHeight,parseInt("function"==typeof _settings.offset?_settings.offset(anchor,toggle):_settings.offset,10),_settings.clip),distance=endLocation-startLocation,documentHeight=getDocumentHeight(),timeLapsed=0,speed=function(distance,settings){var speed=settings.speedAsDuration?settings.speed:Math.abs(distance/1e3*settings.speed);return settings.durationMax&&speed>settings.durationMax?settings.durationMax:settings.durationMin&&speed<settings.durationMin?settings.durationMin:parseInt(speed,10)}(distance,_settings),loopAnimateScroll=function(timestamp){start||(start=timestamp),timeLapsed+=timestamp-start,position=startLocation+distance*function(settings,time){var pattern;return"easeInQuad"===settings.easing&&(pattern=time*time),"easeOutQuad"===settings.easing&&(pattern=time*(2-time)),"easeInOutQuad"===settings.easing&&(pattern=time<.5?2*time*time:(4-2*time)*time-1),"easeInCubic"===settings.easing&&(pattern=time*time*time),"easeOutCubic"===settings.easing&&(pattern=--time*time*time+1),"easeInOutCubic"===settings.easing&&(pattern=time<.5?4*time*time*time:(time-1)*(2*time-2)*(2*time-2)+1),"easeInQuart"===settings.easing&&(pattern=time*time*time*time),"easeOutQuart"===settings.easing&&(pattern=1- --time*time*time*time),"easeInOutQuart"===settings.easing&&(pattern=time<.5?8*time*time*time*time:1-8*--time*time*time*time),"easeInQuint"===settings.easing&&(pattern=time*time*time*time*time),"easeOutQuint"===settings.easing&&(pattern=1+--time*time*time*time*time),"easeInOutQuint"===settings.easing&&(pattern=time<.5?16*time*time*time*time*time:1+16*--time*time*time*time*time),settings.customEasing&&(pattern=settings.customEasing(time)),pattern||time}(_settings,percentage=(percentage=0===speed?0:timeLapsed/speed)>1?1:percentage),window.scrollTo(0,Math.floor(position)),function(position,endLocation){var currentLocation=window.pageYOffset;if(position==endLocation||currentLocation==endLocation||(startLocation<endLocation&&window.innerHeight+currentLocation)>=documentHeight)return smoothScroll.cancelScroll(!0),adjustFocus(anchor,endLocation,isNum),emitEvent("scrollStop",_settings,anchor,toggle),start=null,animationInterval=null,!0}(position,endLocation)||(animationInterval=window.requestAnimationFrame(loopAnimateScroll),start=timestamp)};0===window.pageYOffset&&window.scrollTo(0,0),function(anchor,isNum,options){isNum||history.pushState&&options.updateURL&&history.pushState({smoothScroll:JSON.stringify(options),anchor:anchor.id},document.title,anchor===document.documentElement?"#top":"#"+anchor.id)}(anchor,isNum,_settings),"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches?adjustFocus(anchor,Math.floor(endLocation),!1):(emitEvent("scrollStart",_settings,anchor,toggle),smoothScroll.cancelScroll(!0),window.requestAnimationFrame(loopAnimateScroll))}};var clickHandler=function(event){if(!event.defaultPrevented&&!(0!==event.button||event.metaKey||event.ctrlKey||event.shiftKey)&&"closest"in event.target&&(toggle=event.target.closest(selector))&&"a"===toggle.tagName.toLowerCase()&&!event.target.closest(settings.ignore)&&toggle.hostname===window.location.hostname&&toggle.pathname===window.location.pathname&&/#/.test(toggle.href)){var hash,anchor;try{hash=escapeCharacters(decodeURIComponent(toggle.hash))}catch(e){hash=escapeCharacters(toggle.hash)}if("#"===hash){if(!settings.topOnEmptyHash)return;anchor=document.documentElement}else anchor=document.querySelector(hash);(anchor=anchor||"#top"!==hash?anchor:document.documentElement)&&(event.preventDefault(),function(options){if(history.replaceState&&options.updateURL&&!history.state){var hash=window.location.hash;hash=hash||"",history.replaceState({smoothScroll:JSON.stringify(options),anchor:hash||window.pageYOffset},document.title,hash||window.location.href)}}(settings),smoothScroll.animateScroll(anchor,toggle))}},popstateHandler=function(){if(null!==history.state&&history.state.smoothScroll&&history.state.smoothScroll===JSON.stringify(settings)){var anchor=history.state.anchor;"string"==typeof anchor&&anchor&&!(anchor=document.querySelector(escapeCharacters(history.state.anchor)))||smoothScroll.animateScroll(anchor,null,{updateURL:!1})}};smoothScroll.destroy=function(){settings&&(document.removeEventListener("click",clickHandler,!1),window.removeEventListener("popstate",popstateHandler,!1),smoothScroll.cancelScroll(),settings=null,toggle=null,fixedHeader=null,animationInterval=null)};return function(){if(!("querySelector"in document&&"addEventListener"in window&&"requestAnimationFrame"in window&&"closest"in window.Element.prototype))throw"Smooth Scroll: This browser does not support the required JavaScript methods and browser APIs.";smoothScroll.destroy(),settings=extend(defaults,options||{}),fixedHeader=settings.header?document.querySelector(settings.header):null,document.addEventListener("click",clickHandler,!1),settings.updateURL&&settings.popstate&&window.addEventListener("popstate",popstateHandler,!1)}(),smoothScroll}});